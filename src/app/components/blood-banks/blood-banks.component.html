<div class="blood-banks">
  <h2>Blood Banks</h2>
  <div *ngIf="bloodBanks.length === 0; else bloodBankList">
    Loading blood banks...
  </div>
  <ng-template #bloodBankList>
    <button mat-raised-button color="accent" (click)="getLocation()">Get Nearest BloodBank</button>
    <div *ngIf="visible" class="container responsive-grid">
      <mat-card>
        <mat-card-header>
          <mat-card-title>{{ bloodbank.bloodBankName }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ bloodbank.address }}</p>
          <p>Latitude: {{ bloodbank.latitude }}, Longitude: {{ bloodbank.longitude }}</p>
        </mat-card-content>
        <mat-card-footer>
          <button mat-raised-button color="accent" (click)="onBank(bloodbank)">Goto Bank</button>
        </mat-card-footer>
      </mat-card>
    </div>
    <div class="row" style="margin-top: 2%; margin-bottom: 2%;">
      <div class="col-3">
        <select [(ngModel)]="filterOn" class="form-select" aria-label="category">
          <option value="" selected disabled hidden>Select Category</option>
          <option value="BloodBankName">Name</option>
          <option value="Address">Address</option>
        </select>
      </div>
      <div class="col-3">
        <input type="text" class="form-control" [(ngModel)]="filterQuery" placeholder="Search By">
      </div>
      <div class="col-3">
        <button class="btn btn-sm btn-success space" (click)="loadBloodBanks()">Search</button>
        <button class="btn btn-sm btn-success space" (click)="clear()">Clear</button>
      </div>
    </div>
    <div class="row">
      <div class="col-2">
        <div class="dataTables_length"><label>Show
            <select [(ngModel)]="pagesize" (change)="loadBloodBanks()">
              <option value="6">6</option>
              <option value="12">12</option>
              <option value="24">24</option>
              <option value="48">48</option>
              <option value="100">100</option>
            </select> entries</label>
        </div>
      </div>
      <div class="col-md-10" style="float:right; text-align: right">
        <div class="paginations">
          <div>
            <div class="btn-group" id="radiobtn">
              <a class="btn btn-primary btn-sm notActive" (click)="onPrevious()"> Previous </a>
              <a class="btn btn-primary btn-sm active">{{filter.page}}</a>
              <a class="btn btn-primary btn-sm notActive" (click)="onNext()">Next </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">

      <mat-card *ngFor="let bloodBank of bloodBanks" class="blood-bank-card">
        <mat-card-header>
          <mat-card-title>{{ bloodBank.bloodBankName }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ bloodBank.address }}</p>
          <p>Latitude: {{ bloodBank.latitude }}, Longitude: {{ bloodBank.longitude }}</p>
        </mat-card-content>
        <mat-card-footer>
          <button mat-raised-button color="accent" (click)="onBank(bloodBank)">Goto Bank</button>
        </mat-card-footer>
      </mat-card>
    </div>

  </ng-template>
</div>